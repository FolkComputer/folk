source virtual-programs/calibrate/calibrate.folk

set projectedPointPairs {
    {904.372559 591.458679 587.514251943 745.602632357}
    {861.268677 589.672974 640.616994626 744.355675172}
    {853.283936 628.688416 626.631929054 697.157513323}
    {899.884277 627.354553 572.51283996 701.19897353}
    {825.128906 761.807800 571.58708709 511.386817662}
    {816.765808 803.814148 551.958153873 445.141181402}
    {879.723267 786.285400 493.446838809 467.166354202}
    {884.040405 747.926025 514.063179493 528.190007113}
    {837.433411 497.433929 734.85154209 840.799489612}
    {801.941040 488.174866 800.20593071 845.485072253}
    {786.611633 533.021545 791.594557518 799.470858828}
    {825.331299 538.702209 724.39268217 797.443219831}
}
set H [estimateHomography $projectedPointPairs]
# set H {
#     {-0.977984 -0.525122 1506.031606}
#     {-0.187860 -0.859344 1071.484363}
#     {-0.000362 -0.000245 1.000000}
# }

foreach pair $projectedPointPairs {
    lassign $pair x y u v
    puts "$x $y -> $u $v"
    puts "      -> [$matLib applyHomography $H [list $x $y]]"
}

# set pp2 {
#     {1 1 70 70}
#     {1 0 70 0}
#     {0 1 0 70}
#     {0 0 0 0}
# }
# puts [estimateHomography $pp2]

__conclude 0
